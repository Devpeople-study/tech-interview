## Red-Black Tree

- 자가 균형 이진 탐색 트리(BST)의 일종이다.
- 탐색, 삽입, 삭제 모두 시간 복잡도가 O(logn)이다. 각 노드는 빨간색 또는 검은색의 색상을 나타내는 추가 비트를 저장하며, 삽입 및 삭제 중에 트리가 균형을 유지하도록 하는 데 사용된다.

![](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FcitWfI%2FbtrptgRQlFi%2Fvd9FwY1WQKUpKDkjZWIGD1%2Fimg.png)

레드-블랙 트리는 다음과 같은 조건들을 만족한다.

1. 모든 노드는 **빨간색 혹은 검은색이다.**

2. 루트 노드는 **검은색이다.**

3. 모든 리프 노드(NIL)들은 **검은색이다.**

   - NIL : null leaf, 자료를 갖지 않고 트리의 끝을 나타내는 노드
  
4. 빨간색 노드의 자식은 **검은색이다.**

   - No Double Red, 빨간색 노드가 연속으로 나올 수 없다, 검은색 노드는 연속으로 나와도 된다.

5. 모든 리프 노드에서 Black Depth는 같다.

   - 리프 노드에서 루트 노드까지 가는 경로에서 만나는 **검은색** 노드의 개수가 같다.

레드-블랙 트리에 새로운 노드를 삽입할 때 **새로운 노드**는 항상 **빨간색**으로 삽입한다.

이렇게 되면 4번 조건이 위배되는 상황이 발생한다. 즉, **빨간색 노드가 연속으로 2번 나타날 수 있다(Double Red)**

레드 블랙 트리는 이러한 Double Red 문제를 해결하기 위해 두가지 전략을 사용한다.

![](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FbYG3yV%2FbtrpoxGRp6g%2FfBAd1VvrqdWy6QRRSKTX3k%2Fimg.png)

앞으로 새로 삽입할 노드를 **N**(New), 부모 노드를 **P**(Parent), 조상 노드를 **G**(Grand Parent), 삼촌 노드를 **U**(Uncle)라고 하자. 즉, 삼촌 노드는 말 그대로 부모의 형제라고 생각하면 된다.

Double Red가 발생했을 때

- 삼촌 노드가 검은색이라면 -> Restructuring을 수행하면 된다.
- 삼촌 노드가 빨간색이라면 -> Recoloring을 수행하면 된다.

## **Restructuring**

1. 새로운 노드(N), 부모 노드(P), 조상 노드(G)를 오름차순으로 정렬한다.

2. 셋 중 중간값을 부모로 만들고 나머지 둘을 자식으로 만든다.

3. 새로 부모가 된 노드를 검은색으로 만들고 나머지 자식들을 빨간색으로 만든다.

## ****Recoloring****

새로운 노드(N)의 부모(P)와 삼촌(U)을 검은색으로 바꾸고 조상(G)을 빨간색으로 바꾼다.

   - 조상(G)이 루트 노드라면 검은색으로 바꾼다.

   - 조상(G)을 빨간색으로 바꿨을 때 또다시 Double Red가 발생한다면 또다시 Restructuring 혹은 Recoloring을 진행해서 Double Red 문제가 발생하지 않을 때까지 반복한다.